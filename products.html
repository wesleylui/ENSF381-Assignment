<!-- products.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>products</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="A comprehensive HTML example with various tags"/>
    <meta name="Wesley, Marcus" content="Wesley, Marcus" />
    <link rel="stylesheet" href="styles.css">
    <link rel="shortcut icon" href="logo/png/logo-color.png" type="image/x-icon" />
  </head>
  <body id="product-body">
    <script>
        var inShoppingCartList = [];
        var shoppingCartOrder = [];

        function countElements(arr, element) {
            var count = 0;
            for (let i = 0; i < arr.length; i++) {
                if (arr[i] === element) {
                    count++;
                }
            }
            return count;
        }

        function removeCart(index, shoppingCart) {
            let cartElement = index;
            let position = shoppingCartOrder.indexOf(cartElement)
            var shoppingCartTexts = document.getElementsByClassName("cart-text");
            let indexToRemove = inShoppingCartList.indexOf(cartElement);

            if (indexToRemove !== -1) {
                inShoppingCartList.splice(indexToRemove, 1);
            }

            if (!inShoppingCartList.includes(cartElement)) {
                let indexToRemove = shoppingCartOrder.indexOf(cartElement);
                if (indexToRemove !== -1) {
                    shoppingCartOrder.splice(indexToRemove, 1);
                }
                let position = shoppingCartOrder.indexOf(cartElement)
                const childElements = shoppingCart.children
                shoppingCart.removeChild(childElements[indexToRemove+1])
            }
            else {
                let count = countElements(inShoppingCartList, cartElement);
                var productNames = document.getElementsByClassName("product-title");
                var prices = document.getElementsByClassName("price-tag");
                shoppingCartTexts[position].textContent = `${productNames[cartElement].textContent} - ${prices[cartElement].textContent} - ${count}`;
            }                   
            console.log(inShoppingCartList);
            console.log(shoppingCartOrder);
            let count = countElements(inShoppingCartList, cartElement);
        }

        function addCart(id) {
            var index = parseInt(id);
            var productNames = document.getElementsByClassName("product-title");
            var prices = document.getElementsByClassName("price-tag");
            alert(`${productNames[index].textContent} has been added to the cart`);

            inShoppingCartList.push(index);

            if (!shoppingCartOrder.includes(index)) {
                shoppingCartOrder.push(index);
            }

            let count = countElements(inShoppingCartList, index);
            console.log(inShoppingCartList);
            console.log(shoppingCartOrder);


            if (count <= 1) {
                var cartItem = document.createElement("div");
                cartItem.className = "cart-item";
                var cartText = document.createElement("p");
                cartText.className = "cart-text";
                cartText.textContent = `${productNames[index].textContent} - ${prices[index].textContent} - 1`;
                var cartBtn = document.createElement("button");
                cartBtn.className = "cart-button";
                cartBtn.textContent = "Remove";
                let position = shoppingCartOrder.indexOf(index);
                cartBtn.onclick = () => {removeCart(index, shoppingCart, productNames, prices)};
                cartItem.append(cartText);
                cartItem.appendChild(cartBtn);
                var shoppingCart = document.getElementById("shopping-cart");
                shoppingCart.appendChild(cartItem);
                console.log(shoppingCart);
            }
            else {
                let cartElement = index;
                let position = shoppingCartOrder.indexOf(cartElement);
                var shoppingCartTexts = document.getElementsByClassName("cart-text");
                shoppingCartTexts[position].textContent = `${productNames[cartElement].textContent} - ${prices[cartElement].textContent} - ${count}`;
            }
        }

    </script>
    <header>
        <img src="logo\png\logo-no-background.png" alt="Logo" height="50" class="Logo">
        <h1>LeShop</h1>
    </header>

    <div class="navigation-links">
        <a href="index.html">Home</a>
        <a href="products.html">Product</a>
        <a href="contact.html">Contacts</a>   
        <a href="login.html">Login</a>
    </div>
    <main>
        <!-- each product has an image. -->
        <!-- name, price, button to add to cart. use heading for name of product -->
        <table class="product-list">
            <tr>
                <th>
                    <h4 class="product-title">LA Lakers LeBron James #23 Statement Swingman Jersey</h4>
                    <img src="images\23jersey.png", height="250" alt="Sorry. Image not Found.">
                    <p class="price-tag">$192.00</p>
                    <button onclick="addCart('0')">Add to Cart</button>
                </th>
                <th>
                    <h4 class="product-title">Lakers NBA Bape Shorts - Yellow</h4>
                    <img src="images\bapeShorts.jpg", height="250" alt="Sorry. Image not Found.">
                    <p class="price-tag">$267.00</p>
                    <button onclick="addCart('1')">Add to Cart</button>
                </th>
            </tr>

            <tr>
                <th>
                    <h4 class="product-title">Lakers Lebron James 75th Anniversary Authentic Icon Jersey</h4>
                    <img src="images\6jersey.png", height="250" width="300" alt="Sorry. Image not Found.">
                    <p class="price-tag">$321.00</p>
                    <button onclick="addCart('2')">Add to Cart</button>
                </th>

                <th>
                    <h4 class="product-title">Los Angeles Lakers Lebron James Stencil Socks</h4>
                    <img src="images\lebronSocks.jpg", height="200" alt="Sorry. Image not Found.">
                    <p class="price-tag">$31.00</p>
                    <button onclick="addCart('3')">Add to Cart</button>
                </th>
            </tr>

            <tr>
                <th >
                    <h4 class="product-title">Lebron James Knitted Christmas Sweater</h4>
                    <img src="images\leChristmasSweater.png" alt="Sorry. Image not Found." height="250">
                    <p class="price-tag">$23.06</p>
                    <button onclick="addCart('4')">Add to Cart</button>
                </th>

                <th>
                    <h4 class="product-title">Lebron James 'The King' BedSheets</h4>
                    <img src="images\leBedSheets.webp" alt="Sorry. Image not found." height="300">
                    <p class="price-tag">$23.06</p>
                    <button onclick="addCart('5')">Add to Cart</button>
                </th>
            </tr>

            <tr>
                <th>
                    <h4 class="product-title">LeBron XXI 'Freshwater'</h4>
                    <img src="images\lebronShoe.jpeg" alt="Sorry. Image not found." height="300">
                    <p class="price-tag">$260.00</p>
                    <button onclick="addCart('6')">Add to Cart</button>
                </th>

                <th>
                    <h4 class="product-title">LeBron Funko Pop</h4>
                    <img src="images\lebronFunkoPop.jpg" alt="Sorry. Image not found." height="300">
                    <p class="price-tag">$24.08</p>
                    <button onclick="addCart('7')">Add to Cart</button>
                </th>
            </tr>
            <tr id="shopping-cart">
                <td><h2>Shopping Cart</h2></td>
            </tr>
        </table>

    </main>
    <footer>
        <t>&copy Copyright, Marcus Lieu, Wesley Lui</t>
    </footer
    </body>
</html>
